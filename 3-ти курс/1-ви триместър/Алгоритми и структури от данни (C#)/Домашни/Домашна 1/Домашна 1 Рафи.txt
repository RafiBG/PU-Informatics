using System;
using System.Collections.Generic;
using System.Linq;

namespace AlgoritHomeWork1
{
    internal class Program
    {
        static void Main(string[] args)
        {
            RealNumbers();        // N. Задача 1
            MostFrequentNumber(); // N. Задача 2
            MagicSquare();        // N. Задача 3
        }

        static void RealNumbers() // N. Задача 1
        {
            Console.Write("Enter positive whone number between 1 and 19: ");
            int number = int.Parse(Console.ReadLine());
            if ( number <= 1 || number >= 20) 
            {
                Console.WriteLine("Number must be between 1 - 19");
                RealNumbers();
            }
            double[] array = new double[number];
            for (int i = 0; i < array.Length; i++)
            {
                Console.Write($"Enter element [{i + 1}]: ");
                array[i] = double.Parse(Console.ReadLine());
            }

            double sum = 0;
            foreach (double num in array)
            {
                sum += num;
            }
            Console.WriteLine($"The sum of the first {number} elements is: {sum}");
        }

        static void MostFrequentNumber() // N. Задача 2
        {
            Console.Write("Enter the number of elements in the array: ");
            int n = int.Parse(Console.ReadLine());
            int[] array = new int[n];

            for (int i = 0; i < n; i++)
            {
                Console.Write($"Enter two digit positive number [{i + 1}]: ");
                int number = int.Parse(Console.ReadLine());

                if (number < 10 || number > 99)
                {
                    Console.WriteLine("The number must be a two digit positive number.");
                    i--;
                }
                else
                {
                    array[i] = number;
                }
            }

            int mostFrequentNumber = array[0];
            int maxCount = 0;
            foreach (var num in array.Distinct())
            {
                int count = array.Count(x => x == num);
                if (count > maxCount)
                {
                    mostFrequentNumber = num;
                    maxCount = count;
                }
            }
            Console.WriteLine($"The most frequent number is: {mostFrequentNumber} and it appears {maxCount} times.");
        }

        static void MagicSquare()  // N. Задача 3
        {
            Console.Write("Enter size of the square (1 to 20): ");
            int size = int.Parse(Console.ReadLine());

            if (size < 1 || size > 20)
            {
                Console.WriteLine("The size must be in the range of (1 - 20)");
                return;
            }

            int[,] matrix = new int[size, size];

            for (int i = 0; i < size; i++)
            {
                for (int j = 0; j < size; j++)
                {
                    Console.Write($"Enter element [{i + 1}, {j + 1}]: ");
                    matrix[i, j] = int.Parse(Console.ReadLine());
                }
            }

            int diagonal1 = 0;
            int diagonal2 = 0;
            for (int i = 0; i < size; i++)
            {
                diagonal1 += matrix[i, i];
                diagonal2 += matrix[i, size - i - 1];
            }
            if (diagonal1 != diagonal2)
            {
                Console.WriteLine("The matrix is not a magic square.");
                return;
            }

            int row1 = 0;
            for (int i = 0; i < size; i++)
            {
                row1 += matrix[0, i];
            }

            for (int i = 0; i < size; i++)
            {
                int sumRow = 0;
                int colRow = 0;
                for (int j = 0; j < size; j++)
                {
                    sumRow += matrix[i, j];
                    colRow += matrix[j, i];
                }

                if (sumRow != row1 || colRow != row1)
                {
                    Console.WriteLine("The matrix is not a magic square.");
                    return;
                }
            }
            Console.WriteLine("The matrix is a magic square.");
        }
    }
}